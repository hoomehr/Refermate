# Infrastructure Deployment Recommendations

## Executive Summary

This infrastructure plan was generated by Inframate based on analyzing your application's requirements and codebase structure.

### Recommended AWS Services:

AWS S3, AWS CloudFront, AWS Route 53, AWS Certificate Manager (ACM), AWS WAF, AWS CloudWatch, AWS CodePipeline, AWS CodeBuild

## Detailed Recommendations

*   **Static Site Hosting (S3 + CloudFront):**
    *   Build your React application into static assets (HTML, CSS, JS).
    *   Host these static assets in an **AWS S3 bucket**. Configure the bucket for static website hosting, but primarily, it will serve as an origin for CloudFront.
    *   Use **AWS CloudFront** as a Content Delivery Network (CDN) in front of the S3 bucket. This provides:
        *   **High Availability:** CloudFront distributes content across multiple edge locations.
        *   **Auto-Scaling:** CloudFront handles traffic spikes automatically.
        *   **Performance:** Caches content closer to users, reducing latency.
        *   **Cost-Effectiveness:** Reduces S3 GET request costs and data transfer out costs from S3.
        *   **Security:** Enables HTTPS with AWS Certificate Manager.
*   **DNS & SSL/TLS (Route 53 + ACM):**
    *   Use **AWS Route 53** to manage your custom domain name (e.g., `app.yourdomain.com`).
    *   Use **AWS Certificate Manager (ACM)** to provision and manage free SSL/TLS certificates for your custom domain, easily integrated with CloudFront.
*   **Security (WAF & S3 Policies):**
    *   Integrate **AWS WAF** with CloudFront to protect against common web exploits (e.g., SQL injection, XSS), even for static sites.
    *   Configure S3 bucket policies to restrict direct public access to the bucket. Only allow CloudFront to access the S3 bucket using an Origin Access Control (OAC) or Origin Access Identity (OAI). OAC is the newer, recommended approach.
*   **Monitoring and Logging (CloudWatch):**
    *   **AWS CloudWatch** will be used for:
        *   Monitoring CloudFront metrics (requests, error rates, cache hit ratio).
        *   Storing CloudFront access logs.
        *   Storing S3 access logs.
        *   Creating alarms based on metrics (e.g., high error rates).
*   **CI/CD (CodePipeline + CodeBuild):**
    *   Since `has_ci` is false, implement a CI/CD pipeline using **AWS CodePipeline** and **AWS CodeBuild**.
        *   **CodeCommit/GitHub/Bitbucket** as a source.
        *   **CodeBuild** to build the TypeScript/React application (e.g., `npm run build`).
        *   **CodePipeline** to deploy the built static assets to the S3 bucket and potentially invalidate the CloudFront cache.
*   **Backend/Database (Future Consideration):**
    *   The "Database: Unknown" implies there might be a backend API. If so, consider:
        *   **API Gateway + AWS Lambda:** For serverless APIs.
        *   **AWS Fargate (ECS) or App Runner:** For containerized backend services.
        *   **Database:** RDS (SQL), DynamoDB (NoSQL), Aurora (MySQL/PostgreSQL compatible), etc., depending on requirements.
    *   This Terraform will focus *only* on the frontend. The backend would be a separate set of resources.
*   **Cost Optimization:**
    *   Leverage CloudFront caching heavily to minimize S3 costs.
    *   Use appropriate S3 storage classes (Standard is fine for frequently accessed assets).
    *   Monitor CloudWatch metrics and logs, but be mindful of data ingestion/storage costs for very high traffic.
    *   Use reserved instances or savings plans for predictable backend compute (if applicable later).

## Estimated Monthly Costs

This estimation assumes a small-to-medium traffic application.
*   **AWS S3:**
    *   Storage: Assuming ~500MB of static assets: $0.023/GB-month * 0.5GB = ~$0.01/month
    *   Requests: Most requests will hit CloudFront. S3 GET requests (origin fetches by CloudFront): Negligible if caching is effective. Perhaps $0.10 - $0.50/month.
    *   **Total S3: ~$0.10 - $0.51/month**
*   **AWS CloudFront:**
    *   Data Transfer Out: Highly variable. Assuming 100GB/month. First 1TB is free per month (aggregated across all AWS services). Subsequent data transfer varies by region (e.g., ~$0.085/GB for US/Europe). If within free tier, $0. If exceeding, this can be the main cost. Let's assume 50GB beyond free tier: 50GB * $0.085 = $4.25
    *   HTTP/S Requests: First 10 million requests/month are free. Beyond that, ~$0.0075 - $0.01 per 10,000 requests. Assume 1 million requests: $0.
    *   **Total CloudFront: ~$0.00 - $5.00/month (highly dependent on traffic and free tier usage)**
*   **AWS Route 53:**
    *   Hosted Zone: $0.50/month per hosted zone.
    *   Standard Queries: ~$0.40 per million queries (first billion free for Alias queries to CloudFront). Negligible.
    *   **Total Route 53: ~$0.50/month**
*   **AWS Certificate Manager (ACM):**
    *   Public certificates used with CloudFront are **free**.
    *   **Total ACM: $0.00/month**
*   **AWS WAF:**
    *   Per WebACL: $5/month.
    *   Per million requests: $0.60/month.
    *   Per rule: $1/month/rule (AWS Managed Rules can have many rules, but there are often bundled prices for managed rule groups e.g. $5-$10 for common ones). Let's assume one managed rule group like AWSManagedRulesCommonRuleSet.
    *   **Total WAF: ~$10 - $15/month (assuming 1 WebACL, 1 Managed Rule Group, low request volume passing through WAF)**
*   **AWS CloudWatch:**
    *   Logs: First 5GB/month ingested free. Then ~$0.50/GB. Assume 1GB beyond free tier for logs: $0.50.
    *   Metrics: Standard CloudFront metrics are free. Custom metrics have costs.
    *   Alarms: $0.10 per alarm/month (standard resolution). Assume 3 alarms: $0.30.
    *   **Total CloudWatch: ~$0.80/month**
*   **AWS CodePipeline (for CI/CD - if implemented):**
    *   $1.00 per active pipeline per month (first one free for 30 days).
    *   **Total CodePipeline: ~$1.00/month** (after first month or if more than one pipeline)
*   **AWS CodeBuild (for CI/CD - if implemented):**
    *   Build minutes: Has a free tier (e.g., 100 minutes of `build.general1.small`). Costs depend on instance type and build duration. For a React app, builds are usually quick.
    *   **Total CodeBuild: ~$0.00 - $5.00/month** (likely within free tier for a single small app).
**Estimated Total Monthly Cost (Frontend Only):**
*   **Low End (leveraging free tiers): ~$11.40/month** (S3 $0.10 + CloudFront $0 + Route53 $0.50 + ACM $0 + WAF $10 + CloudWatch $0.80 + Pipeline $0)
*   **Medium End (moderate traffic, basic WAF rule group): ~$22.81/month** (S3 $0.51 + CloudFront $5 + Route53 $0.50 + ACM $0 + WAF $15 + CloudWatch $0.80 + Pipeline $1)
This estimate excludes any backend API or database costs.

*Note: These cost estimates are approximate and may vary based on usage patterns, region, and AWS pricing changes.*

## Deployment Instructions

1. **Prerequisites**:
   - AWS CLI configured with appropriate credentials
   - Terraform installed (v1.0.0+)

2. **Configuration**:
   - Update variables in `terraform.tfvars` to match your requirements
   - Review the Terraform files to ensure they meet your needs

3. **Deployment**:
   ```bash
   terraform init
   terraform plan
   terraform apply
   ```

4. **Cleanup**:
   ```bash
   terraform destroy
   ```

## Notes

- The Terraform files have been generated in the `terraform/` directory
- The configuration is based on the application requirements specified in `inframate.md`
- You may need to customize the Terraform files for your specific needs
